!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.PhotoSwipe=t()}(this,function(){"use strict";var e=function(e,t,n,i){var o={features:null,bind:function(e,t,n,i){var o=(i?"remove":"add")+"EventListener";t=t.split(" ");for(var a=0;a<t.length;a++)t[a]&&e[o](t[a],n,!1)},isArray:function(e){return e instanceof Array},createEl:function(e,t){var n=document.createElement(t||"div");return e&&(n.className=e),n},getScrollY:function(){var e=window.pageYOffset;return void 0!==e?e:document.documentElement.scrollTop},unbind:function(e,t,n){o.bind(e,t,n,!0)},removeClass:function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(e,t){o.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},hasClass:function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},getChildByClass:function(e,t){for(var n=e.firstChild;n;){if(o.hasClass(n,t))return n;n=n.nextSibling}},arraySearch:function(e,t,n){for(var i=e.length;i--;)if(e[i][n]===t)return i;return-1},extend:function(e,t,n){for(var i in t)if(t.hasOwnProperty(i)){if(n&&e.hasOwnProperty(i))continue;e[i]=t[i]}},easing:{sine:{out:function(e){return Math.sin(e*(Math.PI/2))},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(o.features)return o.features;var e=o.createEl(),t=e.style,n="",i={};if(i.oldIE=document.all&&!document.addEventListener,i.touch="ontouchstart"in window,window.requestAnimationFrame&&(i.raf=window.requestAnimationFrame,i.caf=window.cancelAnimationFrame),i.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,!i.pointerEvent){var a=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var r=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);r&&r.length>0&&(r=parseInt(r[1],10),r>=1&&r<8&&(i.isOldIOSPhone=!0))}var s=a.match(/Android\s([0-9\.]*)/),l=s?s[1]:0;l=parseFloat(l),l>=1&&(l<4.4&&(i.isOldAndroid=!0),i.androidVersion=l),i.isMobileOpera=/opera mini|opera mobi/i.test(a)}for(var c,d,u=["transform","perspective","animationName"],h=["","webkit","Moz","ms","O"],m=0;m<4;m++){n=h[m];for(var f=0;f<3;f++)c=u[f],d=n+(n?c.charAt(0).toUpperCase()+c.slice(1):c),!i[c]&&d in t&&(i[c]=d);n&&!i.raf&&(n=n.toLowerCase(),i.raf=window[n+"RequestAnimationFrame"],i.raf&&(i.caf=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]))}if(!i.raf){var g=0;i.raf=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-g)),i=window.setTimeout(function(){e(t+n)},n);return g=t+n,i},i.caf=function(e){clearTimeout(e)}}return i.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,o.features=i,i}};o.detectFeatures(),o.features.oldIE&&(o.bind=function(e,t,n,i){t=t.split(" ");for(var o,a=(i?"detach":"attach")+"Event",r=function(){n.handleEvent.call(n)},s=0;s<t.length;s++)if(o=t[s])if("object"==typeof n&&n.handleEvent){if(i){if(!n["oldIE"+o])return!1}else n["oldIE"+o]=r;e[a]("on"+o,n["oldIE"+o])}else e[a]("on"+o,n)});var a=this,r=25,s=3,l={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(e){return"A"===e.tagName},getDoubleTapZoom:function(e,t){return e?1:t.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};o.extend(l,i);var c,d,u,h,m,f,g,p,E,T,C,I,O,D,v,b,R,y,K,_,k,w,S,x,N,A,L,P,B,F,M,$,H,q,V,z,U,j,W,G,X,Y,Z,J,Q,ee,te,ne,ie,oe,ae,re,se,le,ce,de,ue=function(){return{x:0,y:0}},he=ue(),me=ue(),fe=ue(),ge={},pe=0,Ee={},Te=ue(),Ce=0,Ie=!0,Oe=[],De={},ve=!1,be=function(e,t){o.extend(a,t.publicMethods),Oe.push(e)},Re=function(e){var t=Qt();return e>t-1?e-t:e<0?t+e:e},ye={},Ke=function(e,t){return ye[e]||(ye[e]=[]),ye[e].push(t)},_e=function(e){var t=ye[e];if(t){var n=Array.prototype.slice.call(arguments);n.shift();for(var i=0;i<t.length;i++)t[i].apply(a,n)}},ke=function(){return(new Date).getTime()},we=function(e){le=e,a.bg.style.opacity=e*l.bgOpacity},Se=function(e,t,n,i,o){(!ve||o&&o!==a.currItem)&&(i/=o?o.fitRatio:a.currItem.fitRatio),e[w]=I+t+"px, "+n+"px"+O+" scale("+i+")"},xe=function(e){ie&&(e&&(T>a.currItem.fitRatio?ve||(hn(a.currItem,!1,!0),ve=!0):ve&&(hn(a.currItem),ve=!1)),Se(ie,fe.x,fe.y,T))},Ne=function(e){e.container&&Se(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)},Ae=function(e,t){t[w]=I+e+"px, 0px"+O},Le=function(e,t){if(!l.loop&&t){var n=h+(Te.x*pe-e)/Te.x,i=Math.round(e-Tt.x);(n<0&&i>0||n>=Qt()-1&&i<0)&&(e=Tt.x+i*l.mainScrollEndFriction)}Tt.x=e,Ae(e,m)},Pe=function(e,t){var n=Ct[e]-Ee[e];return me[e]+he[e]+n-n*(t/C)},Be=function(e,t){e.x=t.x,e.y=t.y,t.id&&(e.id=t.id)},Fe=function(e){e.x=Math.round(e.x),e.y=Math.round(e.y)},Me=null,$e=function(){Me&&(o.unbind(document,"mousemove",$e),o.addClass(e,"pswp--has_mouse"),l.mouseUsed=!0,_e("mouseUsed")),Me=setTimeout(function(){Me=null},100)},He=function(){o.bind(document,"keydown",a),M.transform&&o.bind(a.scrollWrap,"click",a),l.mouseUsed||o.bind(document,"mousemove",$e),o.bind(window,"resize scroll",a),_e("bindEvents")},qe=function(){o.unbind(window,"resize",a),o.unbind(window,"scroll",E.scroll),o.unbind(document,"keydown",a),o.unbind(document,"mousemove",$e),M.transform&&o.unbind(a.scrollWrap,"click",a),j&&o.unbind(window,g,a),_e("unbindEvents")},Ve=function(e,t){var n=ln(a.currItem,ge,e);return t&&(ne=n),n},ze=function(e){return e||(e=a.currItem),e.initialZoomLevel},Ue=function(e){return e||(e=a.currItem),e.w>0?l.maxSpreadZoom:1},je=function(e,t,n,i){return i===a.currItem.initialZoomLevel?(n[e]=a.currItem.initialPosition[e],!0):(n[e]=Pe(e,i),n[e]>t.min[e]?(n[e]=t.min[e],!0):n[e]<t.max[e]&&(n[e]=t.max[e],!0))},We=function(){if(w){var t=M.perspective&&!x;return I="translate"+(t?"3d(":"("),void(O=M.perspective?", 0px)":")")}w="left",o.addClass(e,"pswp--ie"),Ae=function(e,t){t.left=e+"px"},Ne=function(e){var t=e.fitRatio>1?1:e.fitRatio,n=e.container.style,i=t*e.w,o=t*e.h;n.width=i+"px",n.height=o+"px",n.left=e.initialPosition.x+"px",n.top=e.initialPosition.y+"px"},xe=function(){if(ie){var e=ie,t=a.currItem,n=t.fitRatio>1?1:t.fitRatio,i=n*t.w,o=n*t.h;e.width=i+"px",e.height=o+"px",e.left=fe.x+"px",e.top=fe.y+"px"}}},Ge=function(e){var t="";l.escKey&&27===e.keyCode?t="close":l.arrowKeys&&(37===e.keyCode?t="prev":39===e.keyCode&&(t="next")),t&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.preventDefault?e.preventDefault():e.returnValue=!1,a[t]()))},Xe=function(e){e&&(X||G||oe||z)&&(e.preventDefault(),e.stopPropagation())},Ye=function(){a.setScrollOffset(0,o.getScrollY())},Ze={},Je=0,Qe=function(e){Ze[e]&&(Ze[e].raf&&A(Ze[e].raf),Je--,delete Ze[e])},et=function(e){Ze[e]&&Qe(e),Ze[e]||(Je++,Ze[e]={})},tt=function(){for(var e in Ze)Ze.hasOwnProperty(e)&&Qe(e)},nt=function(e,t,n,i,o,a,r){var s,l=ke();et(e);var c=function(){if(Ze[e]){if(s=ke()-l,s>=i)return Qe(e),a(n),void(r&&r());a((n-t)*o(s/i)+t),Ze[e].raf=N(c)}};c()},it={shout:_e,listen:Ke,viewportSize:ge,options:l,isMainScrollAnimating:function(){return oe},getZoomLevel:function(){return T},getCurrentIndex:function(){return h},isDragging:function(){return j},isZooming:function(){return Q},setScrollOffset:function(e,t){Ee.x=e,F=Ee.y=t,_e("updateScrollOffset",Ee)},applyZoomPan:function(e,t,n,i){fe.x=t,fe.y=n,T=e,xe(i)},init:function(){if(!c&&!d){var n;a.framework=o,a.template=e,a.bg=o.getChildByClass(e,"pswp__bg"),L=e.className,c=!0,M=o.detectFeatures(),N=M.raf,A=M.caf,w=M.transform,B=M.oldIE,a.scrollWrap=o.getChildByClass(e,"pswp__scroll-wrap"),a.container=o.getChildByClass(a.scrollWrap,"pswp__container"),m=a.container.style,a.itemHolders=b=[{el:a.container.children[0],wrap:0,index:-1},{el:a.container.children[1],wrap:0,index:-1},{el:a.container.children[2],wrap:0,index:-1}],b[0].el.style.display=b[2].el.style.display="none",We(),E={resize:a.updateSize,scroll:Ye,keydown:Ge,click:Xe};var i=M.isOldIOSPhone||M.isOldAndroid||M.isMobileOpera;for(M.animationName&&M.transform&&!i||(l.showAnimationDuration=l.hideAnimationDuration=0),n=0;n<Oe.length;n++)a["init"+Oe[n]]();if(t){var r=a.ui=new t(a,o);r.init()}_e("firstUpdate"),h=h||l.index||0,(isNaN(h)||h<0||h>=Qt())&&(h=0),a.currItem=Jt(h),(M.isOldIOSPhone||M.isOldAndroid)&&(Ie=!1),e.setAttribute("aria-hidden","false"),l.modal&&(Ie?e.style.position="fixed":(e.style.position="absolute",e.style.top=o.getScrollY()+"px")),void 0===F&&(_e("initialLayout"),F=P=o.getScrollY());var u="pswp--open ";for(l.mainClass&&(u+=l.mainClass+" "),l.showHideOpacity&&(u+="pswp--animate_opacity "),u+=x?"pswp--touch":"pswp--notouch",u+=M.animationName?" pswp--css_animation":"",u+=M.svg?" pswp--svg":"",o.addClass(e,u),a.updateSize(),f=-1,Ce=null,n=0;n<s;n++)Ae((n+f)*Te.x,b[n].el.style);B||o.bind(a.scrollWrap,p,a),Ke("initialZoomInEnd",function(){a.setContent(b[0],h-1),a.setContent(b[2],h+1),b[0].el.style.display=b[2].el.style.display="block",l.focus&&e.focus(),He()}),a.setContent(b[1],h),a.updateCurrItem(),_e("afterInit"),Ie||(D=setInterval(function(){Je||j||Q||T!==a.currItem.initialZoomLevel||a.updateSize()},1e3)),o.addClass(e,"pswp--visible")}},close:function(){c&&(c=!1,d=!0,_e("close"),qe(),tn(a.currItem,null,!0,a.destroy))},destroy:function(){_e("destroy"),Gt&&clearTimeout(Gt),e.setAttribute("aria-hidden","true"),e.className=L,D&&clearInterval(D),o.unbind(a.scrollWrap,p,a),o.unbind(window,"scroll",a),bt(),tt(),ye=null},panTo:function(e,t,n){n||(e>ne.min.x?e=ne.min.x:e<ne.max.x&&(e=ne.max.x),t>ne.min.y?t=ne.min.y:t<ne.max.y&&(t=ne.max.y)),fe.x=e,fe.y=t,xe()},handleEvent:function(e){e=e||window.event,E[e.type]&&E[e.type](e)},goTo:function(e){e=Re(e);var t=e-h;Ce=t,h=e,a.currItem=Jt(h),pe-=t,Le(Te.x*pe),tt(),oe=!1,a.updateCurrItem()},next:function(){a.goTo(h+1)},prev:function(){a.goTo(h-1)},updateCurrZoomItem:function(e){if(e&&_e("beforeChange",0),b[1].el.children.length){var t=b[1].el.children[0];ie=o.hasClass(t,"pswp__zoom-wrap")?t.style:null}else ie=null;ne=a.currItem.bounds,C=T=a.currItem.initialZoomLevel,fe.x=ne.center.x,fe.y=ne.center.y,e&&_e("afterChange")},invalidateCurrItems:function(){v=!0;for(var e=0;e<s;e++)b[e].item&&(b[e].item.needsUpdate=!0)},updateCurrItem:function(e){if(0!==Ce){var t,n=Math.abs(Ce);if(!(e&&n<2)){a.currItem=Jt(h),ve=!1,_e("beforeChange",Ce),n>=s&&(f+=Ce+(Ce>0?-s:s),n=s);for(var i=0;i<n;i++)Ce>0?(t=b.shift(),b[s-1]=t,f++,Ae((f+2)*Te.x,t.el.style),a.setContent(t,h-n+i+1+1)):(t=b.pop(),b.unshift(t),f--,Ae(f*Te.x,t.el.style),a.setContent(t,h+n-i-1-1));if(ie&&1===Math.abs(Ce)){var o=Jt(R);o.initialZoomLevel!==T&&(ln(o,ge),hn(o),Ne(o))}Ce=0,a.updateCurrZoomItem(),R=h,_e("afterChange")}}},updateSize:function(t){if(!Ie&&l.modal){var n=o.getScrollY();if(F!==n&&(e.style.top=n+"px",F=n),!t&&De.x===window.innerWidth&&De.y===window.innerHeight)return;De.x=window.innerWidth,De.y=window.innerHeight,e.style.height=De.y+"px"}if(ge.x=a.scrollWrap.clientWidth,ge.y=a.scrollWrap.clientHeight,Ye(),Te.x=ge.x+Math.round(ge.x*l.spacing),Te.y=ge.y,Le(Te.x*pe),_e("beforeResize"),void 0!==f){for(var i,r,c,d=0;d<s;d++)i=b[d],Ae((d+f)*Te.x,i.el.style),c=h+d-1,l.loop&&Qt()>2&&(c=Re(c)),r=Jt(c),r&&(v||r.needsUpdate||!r.bounds)?(a.cleanSlide(r),a.setContent(i,c),1===d&&(a.currItem=r,a.updateCurrZoomItem(!0)),r.needsUpdate=!1):i.index===-1&&c>=0&&a.setContent(i,c),r&&r.container&&(ln(r,ge),hn(r),Ne(r));v=!1}C=T=a.currItem.initialZoomLevel,ne=a.currItem.bounds,ne&&(fe.x=ne.center.x,fe.y=ne.center.y,xe(!0)),_e("resize")},zoomTo:function(e,t,n,i,a){t&&(C=T,Ct.x=Math.abs(t.x)-fe.x,Ct.y=Math.abs(t.y)-fe.y,Be(me,fe));var r=Ve(e,!1),s={};je("x",r,s,e),je("y",r,s,e);var l=T,c={x:fe.x,y:fe.y};Fe(s);var d=function(t){1===t?(T=e,fe.x=s.x,fe.y=s.y):(T=(e-l)*t+l,fe.x=(s.x-c.x)*t+c.x,fe.y=(s.y-c.y)*t+c.y),a&&a(t),xe(1===t)};n?nt("customZoomTo",0,1,n,i||o.easing.sine.inOut,d):d(1)}},ot=30,at=10,rt={},st={},lt={},ct={},dt={},ut=[],ht={},mt=[],ft={},gt=0,pt=ue(),Et=0,Tt=ue(),Ct=ue(),It=ue(),Ot=function(e,t){return e.x===t.x&&e.y===t.y},Dt=function(e,t){return Math.abs(e.x-t.x)<r&&Math.abs(e.y-t.y)<r},vt=function(e,t){return ft.x=Math.abs(e.x-t.x),ft.y=Math.abs(e.y-t.y),Math.sqrt(ft.x*ft.x+ft.y*ft.y)},bt=function(){Y&&(A(Y),Y=null)},Rt=function(){j&&(Y=N(Rt),Ht())},yt=function(){return!("fit"===l.scaleMode&&T===a.currItem.initialZoomLevel)},Kt=function(e,t){return!(!e||e===document)&&(!(e.getAttribute("class")&&e.getAttribute("class").indexOf("pswp__scroll-wrap")>-1)&&(t(e)?e:Kt(e.parentNode,t)))},_t={},kt=function(e,t){return _t.prevent=!Kt(e.target,l.isClickableElement),_e("preventDragEvent",e,t,_t),_t.prevent},wt=function(e,t){return t.x=e.pageX,t.y=e.pageY,t.id=e.identifier,t},St=function(e,t,n){n.x=.5*(e.x+t.x),n.y=.5*(e.y+t.y)},xt=function(e,t,n){if(e-H>50){var i=mt.length>2?mt.shift():{};i.x=t,i.y=n,mt.push(i),H=e}},Nt=function(){var e=fe.y-a.currItem.initialPosition.y;return 1-Math.abs(e/(ge.y/2))},At={},Lt={},Pt=[],Bt=function(e){for(;Pt.length>0;)Pt.pop();return S?(de=0,ut.forEach(function(e){0===de?Pt[0]=e:1===de&&(Pt[1]=e),de++})):e.type.indexOf("touch")>-1?e.touches&&e.touches.length>0&&(Pt[0]=wt(e.touches[0],At),e.touches.length>1&&(Pt[1]=wt(e.touches[1],Lt))):(At.x=e.pageX,At.y=e.pageY,At.id="",Pt[0]=At),Pt},Ft=function(e,t){var n,i,o,r,s=0,c=fe[e]+t[e],d=t[e]>0,u=Tt.x+t.x,h=Tt.x-ht.x;return n=c>ne.min[e]||c<ne.max[e]?l.panEndFriction:1,c=fe[e]+t[e]*n,!l.allowPanToNext&&T!==a.currItem.initialZoomLevel||(ie?"h"!==ae||"x"!==e||G||(d?(c>ne.min[e]&&(n=l.panEndFriction,s=ne.min[e]-c,i=ne.min[e]-me[e]),(i<=0||h<0)&&Qt()>1?(r=u,h<0&&u>ht.x&&(r=ht.x)):ne.min.x!==ne.max.x&&(o=c)):(c<ne.max[e]&&(n=l.panEndFriction,s=c-ne.max[e],i=me[e]-ne.max[e]),(i<=0||h>0)&&Qt()>1?(r=u,h>0&&u<ht.x&&(r=ht.x)):ne.min.x!==ne.max.x&&(o=c))):r=u,"x"!==e)?void(oe||Z||T>a.currItem.fitRatio&&(fe[e]+=t[e]*n)):(void 0!==r&&(Le(r,!0),Z=r!==ht.x),ne.min.x!==ne.max.x&&(void 0!==o?fe.x=o:Z||(fe.x+=t.x*n)),void 0!==r)},Mt=function(e){if(!("mousedown"===e.type&&e.button>0)){if(Zt)return void e.preventDefault();if(!U||"mousedown"!==e.type){if(kt(e,!0)&&e.preventDefault(),_e("pointerDown"),S){var t=o.arraySearch(ut,e.pointerId,"id");t<0&&(t=ut.length),ut[t]={x:e.pageX,y:e.pageY,id:e.pointerId}}var n=Bt(e),i=n.length;J=null,tt(),j&&1!==i||(j=re=!0,o.bind(window,g,a),V=ce=se=z=Z=X=W=G=!1,ae=null,_e("firstTouchStart",n),Be(me,fe),he.x=he.y=0,Be(ct,n[0]),Be(dt,ct),ht.x=Te.x*pe,mt=[{x:ct.x,y:ct.y}],H=$=ke(),Ve(T,!0),bt(),Rt()),!Q&&i>1&&!oe&&!Z&&(C=T,G=!1,Q=W=!0,he.y=he.x=0,Be(me,fe),Be(rt,n[0]),Be(st,n[1]),St(rt,st,It),Ct.x=Math.abs(It.x)-fe.x,Ct.y=Math.abs(It.y)-fe.y,ee=te=vt(rt,st))}}},$t=function(e){if(e.preventDefault(),S){var t=o.arraySearch(ut,e.pointerId,"id");if(t>-1){var n=ut[t];n.x=e.pageX,n.y=e.pageY}}if(j){var i=Bt(e);if(ae||X||Q)J=i;else if(Tt.x!==Te.x*pe)ae="h";else{var a=Math.abs(i[0].x-ct.x)-Math.abs(i[0].y-ct.y);Math.abs(a)>=at&&(ae=a>0?"h":"v",J=i)}}},Ht=function(){if(J){var e=J.length;if(0!==e)if(Be(rt,J[0]),lt.x=rt.x-ct.x,lt.y=rt.y-ct.y,Q&&e>1){if(ct.x=rt.x,ct.y=rt.y,!lt.x&&!lt.y&&Ot(J[1],st))return;Be(st,J[1]),G||(G=!0,_e("zoomGestureStarted"));var t=vt(rt,st),n=jt(t);n>a.currItem.initialZoomLevel+a.currItem.initialZoomLevel/15&&(ce=!0);var i=1,o=ze(),r=Ue();if(n<o)if(l.pinchToClose&&!ce&&C<=a.currItem.initialZoomLevel){var s=o-n,c=1-s/(o/1.2);we(c),_e("onPinchClose",c),se=!0}else i=(o-n)/o,i>1&&(i=1),n=o-i*(o/3);else n>r&&(i=(n-r)/(6*o),i>1&&(i=1),n=r+i*o);i<0&&(i=0),ee=t,St(rt,st,pt),he.x+=pt.x-It.x,he.y+=pt.y-It.y,Be(It,pt),fe.x=Pe("x",n),fe.y=Pe("y",n),V=n>T,T=n,xe()}else{if(!ae)return;if(re&&(re=!1,Math.abs(lt.x)>=at&&(lt.x-=J[0].x-dt.x),Math.abs(lt.y)>=at&&(lt.y-=J[0].y-dt.y)),ct.x=rt.x,ct.y=rt.y,0===lt.x&&0===lt.y)return;if("v"===ae&&l.closeOnVerticalDrag&&!yt()){he.y+=lt.y,fe.y+=lt.y;var d=Nt();return z=!0,_e("onVerticalDrag",d),we(d),void xe()}xt(ke(),rt.x,rt.y),X=!0,ne=a.currItem.bounds;var u=Ft("x",lt);u||(Ft("y",lt),Fe(fe),xe())}}},qt=function(e){if(M.isOldAndroid){if(U&&"mouseup"===e.type)return;e.type.indexOf("touch")>-1&&(clearTimeout(U),U=setTimeout(function(){U=0},600))}_e("pointerUp"),kt(e,!1)&&e.preventDefault();var t;if(S){var n=o.arraySearch(ut,e.pointerId,"id");if(n>-1)if(t=ut.splice(n,1)[0],navigator.pointerEnabled)t.type=e.pointerType||"mouse";else{var i={4:"mouse",2:"touch",3:"pen"};t.type=i[e.pointerType],t.type||(t.type=e.pointerType||"mouse")}}var r,s=Bt(e),c=s.length;if("mouseup"===e.type&&(c=0),2===c)return J=null,!0;1===c&&Be(dt,s[0]),0!==c||ae||oe||(t||("mouseup"===e.type?t={x:e.pageX,y:e.pageY,type:"mouse"}:e.changedTouches&&e.changedTouches[0]&&(t={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,type:"touch"})),_e("touchRelease",e,t));var d=-1;if(0===c&&(j=!1,o.unbind(window,g,a),bt(),Q?d=0:Et!==-1&&(d=ke()-Et)),Et=1===c?ke():-1,r=d!==-1&&d<150?"zoom":"swipe",Q&&c<2&&(Q=!1,1===c&&(r="zoomPointerUp"),_e("zoomGestureEnded")),J=null,X||G||oe||z)if(tt(),q||(q=Vt()),q.calculateSwipeSpeed("x"),z){var u=Nt();if(u<l.verticalDragRange)a.close();else{var h=fe.y,m=le;nt("verticalDrag",0,1,300,o.easing.cubic.out,function(e){fe.y=(a.currItem.initialPosition.y-h)*e+h,we((1-m)*e+m),xe()}),_e("onVerticalDrag",1)}}else{if((Z||oe)&&0===c){var f=Ut(r,q);if(f)return;r="zoomPointerUp"}if(!oe)return"swipe"!==r?void Wt():void(!Z&&T>a.currItem.fitRatio&&zt(q))}},Vt=function(){var e,t,n={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(i){mt.length>1?(e=ke()-H+50,t=mt[mt.length-2][i]):(e=ke()-$,t=dt[i]),n.lastFlickOffset[i]=ct[i]-t,n.lastFlickDist[i]=Math.abs(n.lastFlickOffset[i]),n.lastFlickDist[i]>20?n.lastFlickSpeed[i]=n.lastFlickOffset[i]/e:n.lastFlickSpeed[i]=0,Math.abs(n.lastFlickSpeed[i])<.1&&(n.lastFlickSpeed[i]=0),n.slowDownRatio[i]=.95,n.slowDownRatioReverse[i]=1-n.slowDownRatio[i],n.speedDecelerationRatio[i]=1},calculateOverBoundsAnimOffset:function(e,t){n.backAnimStarted[e]||(fe[e]>ne.min[e]?n.backAnimDestination[e]=ne.min[e]:fe[e]<ne.max[e]&&(n.backAnimDestination[e]=ne.max[e]),void 0!==n.backAnimDestination[e]&&(n.slowDownRatio[e]=.7,n.slowDownRatioReverse[e]=1-n.slowDownRatio[e],n.speedDecelerationRatioAbs[e]<.05&&(n.lastFlickSpeed[e]=0,n.backAnimStarted[e]=!0,nt("bounceZoomPan"+e,fe[e],n.backAnimDestination[e],t||300,o.easing.sine.out,function(t){fe[e]=t,xe()}))))},calculateAnimOffset:function(e){n.backAnimStarted[e]||(n.speedDecelerationRatio[e]=n.speedDecelerationRatio[e]*(n.slowDownRatio[e]+n.slowDownRatioReverse[e]-n.slowDownRatioReverse[e]*n.timeDiff/10),n.speedDecelerationRatioAbs[e]=Math.abs(n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]),n.distanceOffset[e]=n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]*n.timeDiff,fe[e]+=n.distanceOffset[e])},panAnimLoop:function(){if(Ze.zoomPan&&(Ze.zoomPan.raf=N(n.panAnimLoop),n.now=ke(),n.timeDiff=n.now-n.lastNow,n.lastNow=n.now,n.calculateAnimOffset("x"),n.calculateAnimOffset("y"),xe(),n.calculateOverBoundsAnimOffset("x"),n.calculateOverBoundsAnimOffset("y"),n.speedDecelerationRatioAbs.x<.05&&n.speedDecelerationRatioAbs.y<.05))return fe.x=Math.round(fe.x),fe.y=Math.round(fe.y),xe(),void Qe("zoomPan")}};return n},zt=function(e){return e.calculateSwipeSpeed("y"),ne=a.currItem.bounds,e.backAnimDestination={},e.backAnimStarted={},Math.abs(e.lastFlickSpeed.x)<=.05&&Math.abs(e.lastFlickSpeed.y)<=.05?(e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0,e.calculateOverBoundsAnimOffset("x"),e.calculateOverBoundsAnimOffset("y"),!0):(et("zoomPan"),e.lastNow=ke(),void e.panAnimLoop())},Ut=function(e,t){var n;oe||(gt=h);var i;if("swipe"===e){var r=ct.x-dt.x,s=t.lastFlickDist.x<10;r>ot&&(s||t.lastFlickOffset.x>20)?i=-1:r<-ot&&(s||t.lastFlickOffset.x<-20)&&(i=1)}var c;i&&(h+=i,h<0?(h=l.loop?Qt()-1:0,c=!0):h>=Qt()&&(h=l.loop?0:Qt()-1,c=!0),c&&!l.loop||(Ce+=i,pe-=i,n=!0));var d,u=Te.x*pe,m=Math.abs(u-Tt.x);return n||u>Tt.x==t.lastFlickSpeed.x>0?(d=Math.abs(t.lastFlickSpeed.x)>0?m/Math.abs(t.lastFlickSpeed.x):333,d=Math.min(d,400),d=Math.max(d,250)):d=333,gt===h&&(n=!1),oe=!0,_e("mainScrollAnimStart"),nt("mainScroll",Tt.x,u,d,o.easing.cubic.out,Le,function(){tt(),oe=!1,gt=-1,(n||gt!==h)&&a.updateCurrItem(),_e("mainScrollAnimComplete")}),n&&a.updateCurrItem(!0),n},jt=function(e){return 1/te*e*C},Wt=function(){var e=T,t=ze(),n=Ue();T<t?e=t:T>n&&(e=n);var i,r=1,s=le;return se&&!V&&!ce&&T<t?(a.close(),!0):(se&&(i=function(e){we((r-s)*e+s)}),a.zoomTo(e,0,200,o.easing.cubic.out,i),!0)};be("Gestures",{publicMethods:{initGestures:function(){var e=function(e,t,n,i,o){y=e+t,K=e+n,_=e+i,k=o?e+o:""};S=M.pointerEvent,S&&M.touch&&(M.touch=!1),S?navigator.pointerEnabled?e("pointer","down","move","up","cancel"):e("MSPointer","Down","Move","Up","Cancel"):M.touch?(e("touch","start","move","end","cancel"),x=!0):e("mouse","down","move","up"),g=K+" "+_+" "+k,p=y,S&&!x&&(x=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),a.likelyTouchDevice=x,E[y]=Mt,E[K]=$t,E[_]=qt,k&&(E[k]=E[_]),M.touch&&(p+=" mousedown",g+=" mousemove mouseup",E.mousedown=E[y],E.mousemove=E[K],E.mouseup=E[_]),x||(l.allowPanToNext=!1)}}});var Gt,Xt,Yt,Zt,Jt,Qt,en,tn=function(t,n,i,r){Gt&&clearTimeout(Gt),Zt=!0,Yt=!0;var s;t.initialLayout?(s=t.initialLayout,t.initialLayout=null):s=l.getThumbBoundsFn&&l.getThumbBoundsFn(h);var c=i?l.hideAnimationDuration:l.showAnimationDuration,d=function(){Qe("initialZoom"),i?(a.template.removeAttribute("style"),a.bg.removeAttribute("style")):(we(1),n&&(n.style.display="block"),o.addClass(e,"pswp--animated-in"),_e("initialZoom"+(i?"OutEnd":"InEnd"))),r&&r(),Zt=!1};if(!c||!s||void 0===s.x)return _e("initialZoom"+(i?"Out":"In")),T=t.initialZoomLevel,Be(fe,t.initialPosition),xe(),e.style.opacity=i?0:1,we(1),void(c?setTimeout(function(){d()},c):d());var m=function(){var n=u,r=!a.currItem.src||a.currItem.loadError||l.showHideOpacity;t.miniImg&&(t.miniImg.style.webkitBackfaceVisibility="hidden"),i||(T=s.w/t.w,fe.x=s.x,fe.y=s.y-P,a[r?"template":"bg"].style.opacity=.001,xe()),et("initialZoom"),i&&!n&&o.removeClass(e,"pswp--animated-in"),r&&(i?o[(n?"remove":"add")+"Class"](e,"pswp--animate_opacity"):setTimeout(function(){o.addClass(e,"pswp--animate_opacity")},30)),Gt=setTimeout(function(){if(_e("initialZoom"+(i?"Out":"In")),i){var a=s.w/t.w,l={x:fe.x,y:fe.y},u=T,h=le,m=function(t){1===t?(T=a,fe.x=s.x,fe.y=s.y-F):(T=(a-u)*t+u,fe.x=(s.x-l.x)*t+l.x,fe.y=(s.y-F-l.y)*t+l.y),xe(),r?e.style.opacity=1-t:we(h-t*h)};n?nt("initialZoom",0,1,c,o.easing.cubic.out,m,d):(m(1),Gt=setTimeout(d,c+20))}else T=t.initialZoomLevel,Be(fe,t.initialPosition),xe(),we(1),r?e.style.opacity=1:we(1),Gt=setTimeout(d,c+20)},i?25:90)};m()},nn={},on=[],an={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return Xt.length}},rn=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},sn=function(e,t,n){var i=e.bounds;i.center.x=Math.round((nn.x-t)/2),i.center.y=Math.round((nn.y-n)/2)+e.vGap.top,i.max.x=t>nn.x?Math.round(nn.x-t):i.center.x,i.max.y=n>nn.y?Math.round(nn.y-n)+e.vGap.top:i.center.y,i.min.x=t>nn.x?0:i.center.x,i.min.y=n>nn.y?e.vGap.top:i.center.y},ln=function(e,t,n){if(e.src&&!e.loadError){var i=!n;if(i&&(e.vGap||(e.vGap={top:0,bottom:0}),_e("parseVerticalMargin",e)),nn.x=t.x,nn.y=t.y-e.vGap.top-e.vGap.bottom,i){var o=nn.x/e.w,a=nn.y/e.h;e.fitRatio=o<a?o:a;var r=l.scaleMode;"orig"===r?n=1:"fit"===r&&(n=e.fitRatio),n>1&&(n=1),e.initialZoomLevel=n,e.bounds||(e.bounds=rn())}if(!n)return;return sn(e,e.w*n,e.h*n),i&&n===e.initialZoomLevel&&(e.initialPosition=e.bounds.center),e.bounds}return e.w=e.h=0,e.initialZoomLevel=e.fitRatio=1,e.bounds=rn(),e.initialPosition=e.bounds.center,e.bounds},cn=function(e,t,n,i,o,r){t.loadError||i&&(t.imageAppended=!0,hn(t,i,t===a.currItem&&ve),n.appendChild(i),r&&setTimeout(function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display="none",t.placeholder=null)},500))},dn=function(e){e.loading=!0,e.loaded=!1;var t=e.img=o.createEl("pswp__img","img"),n=function(){e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,t.onload=t.onerror=null,t=null};return t.onload=n,t.onerror=function(){e.loadError=!0,n()},t.src=e.src,t},un=function(e,t){if(e.src&&e.loadError&&e.container)return t&&(e.container.innerHTML=""),e.container.innerHTML=l.errorMsg.replace("%url%",e.src),!0},hn=function(e,t,n){if(e.src){t||(t=e.container.lastChild);var i=n?e.w:Math.round(e.w*e.fitRatio),o=n?e.h:Math.round(e.h*e.fitRatio);e.placeholder&&!e.loaded&&(e.placeholder.style.width=i+"px",e.placeholder.style.height=o+"px"),t.style.width=i+"px",t.style.height=o+"px"}},mn=function(){if(on.length){for(var e,t=0;t<on.length;t++)e=on[t],e.holder.index===e.index&&cn(e.index,e.item,e.baseDiv,e.img,!1,e.clearPlaceholder);on=[]}};be("Controller",{publicMethods:{lazyLoadItem:function(e){e=Re(e);var t=Jt(e);t&&(!t.loaded&&!t.loading||v)&&(_e("gettingData",e,t),t.src&&dn(t))},initController:function(){o.extend(l,an,!0),a.items=Xt=n,Jt=a.getItemAt,Qt=l.getNumItemsFn,en=l.loop,Qt()<3&&(l.loop=!1),Ke("beforeChange",function(e){var t,n=l.preload,i=null===e||e>=0,o=Math.min(n[0],Qt()),r=Math.min(n[1],Qt());for(t=1;t<=(i?r:o);t++)a.lazyLoadItem(h+t);for(t=1;t<=(i?o:r);t++)a.lazyLoadItem(h-t)}),Ke("initialLayout",function(){a.currItem.initialLayout=l.getThumbBoundsFn&&l.getThumbBoundsFn(h)}),Ke("mainScrollAnimComplete",mn),Ke("initialZoomInEnd",mn),Ke("destroy",function(){for(var e,t=0;t<Xt.length;t++)e=Xt[t],e.container&&(e.container=null),e.placeholder&&(e.placeholder=null),e.img&&(e.img=null),e.preloader&&(e.preloader=null),e.loadError&&(e.loaded=e.loadError=!1);on=null})},getItemAt:function(e){return e>=0&&(void 0!==Xt[e]&&Xt[e])},allowProgressiveImg:function(){return l.forceProgressiveLoading||!x||l.mouseUsed||screen.width>1200},setContent:function(e,t){l.loop&&(t=Re(t));var n=a.getItemAt(e.index);n&&(n.container=null);var i,r=a.getItemAt(t);if(!r)return void(e.el.innerHTML="");_e("gettingData",t,r),e.index=t,e.item=r;var s=r.container=o.createEl("pswp__zoom-wrap");if(!r.src&&r.html&&(r.html.tagName?s.appendChild(r.html):s.innerHTML=r.html),un(r),ln(r,ge),!r.src||r.loadError||r.loaded)r.src&&!r.loadError&&(i=o.createEl("pswp__img","img"),i.style.opacity=1,i.src=r.src,hn(r,i),cn(t,r,s,i,!0));else{if(r.loadComplete=function(n){if(c){if(e&&e.index===t){if(un(n,!0))return n.loadComplete=n.img=null,ln(n,ge),Ne(n),void(e.index===h&&a.updateCurrZoomItem());n.imageAppended?!Zt&&n.placeholder&&(n.placeholder.style.display="none",n.placeholder=null):M.transform&&(oe||Zt)?on.push({item:n,baseDiv:s,img:n.img,index:t,holder:e,clearPlaceholder:!0}):cn(t,n,s,n.img,oe||Zt,!0)}n.loadComplete=null,n.img=null,_e("imageLoadComplete",t,n)}},o.features.transform){var d="pswp__img pswp__img--placeholder";d+=r.msrc?"":" pswp__img--placeholder--blank";var u=o.createEl(d,r.msrc?"img":"");r.msrc&&(u.src=r.msrc),hn(r,u),s.appendChild(u),r.placeholder=u}r.loading||dn(r),a.allowProgressiveImg()&&(!Yt&&M.transform?on.push({item:r,baseDiv:s,img:r.img,index:t,holder:e}):cn(t,r,s,r.img,!0,!0))}Yt||t!==h?Ne(r):(ie=s.style,tn(r,i||r.img)),e.el.innerHTML="",e.el.appendChild(s)},cleanSlide:function(e){e.img&&(e.img.onload=e.img.onerror=null),e.loaded=e.loading=e.img=e.imageAppended=!1}}});var fn,gn={},pn=function(e,t,n){var i=document.createEvent("CustomEvent"),o={origEvent:e,target:e.target,releasePoint:t,pointerType:n||"touch"};i.initCustomEvent("pswpTap",!0,!0,o),e.target.dispatchEvent(i)};be("Tap",{publicMethods:{initTap:function(){Ke("firstTouchStart",a.onTapStart),Ke("touchRelease",a.onTapRelease),Ke("destroy",function(){gn={},fn=null})},onTapStart:function(e){e.length>1&&(clearTimeout(fn),fn=null)},onTapRelease:function(e,t){if(t&&!X&&!W&&!Je){var n=t;if(fn&&(clearTimeout(fn),fn=null,Dt(n,gn)))return void _e("doubleTap",n);if("mouse"===t.type)return void pn(e,t,"mouse");var i=e.target.tagName.toUpperCase();if("BUTTON"===i||o.hasClass(e.target,"pswp__single-tap"))return void pn(e,t);Be(gn,n),fn=setTimeout(function(){pn(e,t),fn=null},300)}}}});var En;be("DesktopZoom",{publicMethods:{initDesktopZoom:function(){B||(x?Ke("mouseUsed",function(){a.setupDesktopZoom()}):a.setupDesktopZoom(!0))},setupDesktopZoom:function(t){En={};var n="wheel mousewheel DOMMouseScroll";Ke("bindEvents",function(){o.bind(e,n,a.handleMouseWheel)}),Ke("unbindEvents",function(){En&&o.unbind(e,n,a.handleMouseWheel)}),a.mouseZoomedIn=!1;var i,r=function(){a.mouseZoomedIn&&(o.removeClass(e,"pswp--zoomed-in"),a.mouseZoomedIn=!1),T<1?o.addClass(e,"pswp--zoom-allowed"):o.removeClass(e,"pswp--zoom-allowed"),s()},s=function(){i&&(o.removeClass(e,"pswp--dragging"),i=!1)};Ke("resize",r),Ke("afterChange",r),Ke("pointerDown",function(){a.mouseZoomedIn&&(i=!0,o.addClass(e,"pswp--dragging"))}),Ke("pointerUp",s),t||r()},handleMouseWheel:function(e){if(T<=a.currItem.fitRatio)return l.modal&&(!l.closeOnScroll||Je||j?e.preventDefault():w&&Math.abs(e.deltaY)>2&&(u=!0,a.close())),!0;if(e.stopPropagation(),En.x=0,"deltaX"in e)1===e.deltaMode?(En.x=18*e.deltaX,En.y=18*e.deltaY):(En.x=e.deltaX,En.y=e.deltaY);else if("wheelDelta"in e)e.wheelDeltaX&&(En.x=-.16*e.wheelDeltaX),e.wheelDeltaY?En.y=-.16*e.wheelDeltaY:En.y=-.16*e.wheelDelta;else{if(!("detail"in e))return;En.y=e.detail}Ve(T,!0);var t=fe.x-En.x,n=fe.y-En.y;(l.modal||t<=ne.min.x&&t>=ne.max.x&&n<=ne.min.y&&n>=ne.max.y)&&e.preventDefault(),a.panTo(t,n)},toggleDesktopZoom:function(t){t=t||{x:ge.x/2+Ee.x,y:ge.y/2+Ee.y};var n=l.getDoubleTapZoom(!0,a.currItem),i=T===n;a.mouseZoomedIn=!i,a.zoomTo(i?a.currItem.initialZoomLevel:n,t,333),o[(i?"remove":"add")+"Class"](e,"pswp--zoomed-in")}}});var Tn,Cn,In,On,Dn,vn,bn,Rn,yn,Kn,_n,kn,wn={history:!0,galleryUID:1},Sn=function(){return _n.hash.substring(1)},xn=function(){Tn&&clearTimeout(Tn),In&&clearTimeout(In)},Nn=function(){var e=Sn(),t={};if(e.length<5)return t;var n,i=e.split("&");for(n=0;n<i.length;n++)if(i[n]){var o=i[n].split("=");o.length<2||(t[o[0]]=o[1])}if(l.galleryPIDs){var a=t.pid;for(t.pid=0,n=0;n<Xt.length;n++)if(Xt[n].pid===a){t.pid=n;break}}else t.pid=parseInt(t.pid,10)-1;return t.pid<0&&(t.pid=0),t},An=function(){if(In&&clearTimeout(In),Je||j)return void(In=setTimeout(An,500));On?clearTimeout(Cn):On=!0;var e=h+1,t=Jt(h);t.hasOwnProperty("pid")&&(e=t.pid);var n=bn+"&gid="+l.galleryUID+"&pid="+e;Rn||_n.hash.indexOf(n)===-1&&(Kn=!0);var i=_n.href.split("#")[0]+"#"+n;kn?"#"+n!==window.location.hash&&history[Rn?"replaceState":"pushState"]("",document.title,i):Rn?_n.replace(i):_n.hash=n,Rn=!0,Cn=setTimeout(function(){On=!1},60)};be("History",{publicMethods:{initHistory:function(){if(o.extend(l,wn,!0),l.history){_n=window.location,Kn=!1,yn=!1,Rn=!1,bn=Sn(),kn="pushState"in history,bn.indexOf("gid=")>-1&&(bn=bn.split("&gid=")[0],bn=bn.split("?gid=")[0]),Ke("afterChange",a.updateURL),Ke("unbindEvents",function(){o.unbind(window,"hashchange",a.onHashChange)});var e=function(){vn=!0,yn||(Kn?history.back():bn?_n.hash=bn:kn?history.pushState("",document.title,_n.pathname+_n.search):_n.hash=""),xn()};Ke("unbindEvents",function(){u&&e()}),Ke("destroy",function(){vn||e()}),Ke("firstUpdate",function(){h=Nn().pid});var t=bn.indexOf("pid=");t>-1&&(bn=bn.substring(0,t),"&"===bn.slice(-1)&&(bn=bn.slice(0,-1))),setTimeout(function(){c&&o.bind(window,"hashchange",a.onHashChange)},40)}},onHashChange:function(){return Sn()===bn?(yn=!0,void a.close()):void(On||(Dn=!0,a.goTo(Nn().pid),Dn=!1))},updateURL:function(){xn(),Dn||(Rn?Tn=setTimeout(An,800):An())}}}),o.extend(a,it)};return e}),function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.PhotoSwipeUI_Default=t()}(this,function(){"use strict";var e=function(e,t){var n,i,o,a,r,s,l,c,d,u,h,m,f,g,p,E,T,C,I,O=this,D=!1,v=!0,b=!0,R={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(t.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return e.currItem.src||"";
},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return e.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},y=function(e){if(E)return!0;e=e||window.event,p.timeToIdle&&p.mouseUsed&&!d&&P();for(var n,i,o=e.target||e.srcElement,a=o.getAttribute("class")||"",r=0;r<z.length;r++)n=z[r],n.onTap&&a.indexOf("pswp__"+n.name)>-1&&(n.onTap(),i=!0);if(i){e.stopPropagation&&e.stopPropagation(),E=!0;var s=t.features.isOldAndroid?600:30;T=setTimeout(function(){E=!1},s)}},K=function(){return!e.likelyTouchDevice||p.mouseUsed||screen.width>p.fitControlsWidth},_=function(e,n,i){t[(i?"add":"remove")+"Class"](e,"pswp__"+n)},k=function(){var e=1===p.getNumItemsFn();e!==g&&(_(i,"ui--one-slide",e),g=e)},w=function(){_(l,"share-modal--hidden",b)},S=function(){return b=!b,b?(t.removeClass(l,"pswp__share-modal--fade-in"),setTimeout(function(){b&&w()},300)):(w(),setTimeout(function(){b||t.addClass(l,"pswp__share-modal--fade-in")},30)),b||N(),!1},x=function(t){t=t||window.event;var n=t.target||t.srcElement;return e.shout("shareLinkClick",t,n),!!n.href&&(!!n.hasAttribute("download")||(window.open(n.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),b||S(),!1))},N=function(){for(var e,t,n,i,o,a="",r=0;r<p.shareButtons.length;r++)e=p.shareButtons[r],n=p.getImageURLForShare(e),i=p.getPageURLForShare(e),o=p.getTextForShare(e),t=e.url.replace("{{url}}",encodeURIComponent(i)).replace("{{image_url}}",encodeURIComponent(n)).replace("{{raw_image_url}}",n).replace("{{text}}",encodeURIComponent(o)),a+='<a href="'+t+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?"download":"")+">"+e.label+"</a>",p.parseShareButtonOut&&(a=p.parseShareButtonOut(e,a));l.children[0].innerHTML=a,l.children[0].onclick=x},A=function(e){for(var n=0;n<p.closeElClasses.length;n++)if(t.hasClass(e,"pswp__"+p.closeElClasses[n]))return!0},L=0,P=function(){clearTimeout(I),L=0,d&&O.setIdle(!1)},B=function(e){e=e?e:window.event;var t=e.relatedTarget||e.toElement;t&&"HTML"!==t.nodeName||(clearTimeout(I),I=setTimeout(function(){O.setIdle(!0)},p.timeToIdleOutside))},F=function(){p.fullscreenEl&&!t.features.isOldAndroid&&(n||(n=O.getFullscreenAPI()),n?(t.bind(document,n.eventK,O.updateFullscreen),O.updateFullscreen(),t.addClass(e.template,"pswp--supports-fs")):t.removeClass(e.template,"pswp--supports-fs"))},M=function(){p.preloaderEl&&($(!0),u("beforeChange",function(){clearTimeout(f),f=setTimeout(function(){e.currItem&&e.currItem.loading?(!e.allowProgressiveImg()||e.currItem.img&&!e.currItem.img.naturalWidth)&&$(!1):$(!0)},p.loadingIndicatorDelay)}),u("imageLoadComplete",function(t,n){e.currItem===n&&$(!0)}))},$=function(e){m!==e&&(_(h,"preloader--active",!e),m=e)},H=function(e){var n=e.vGap;if(K()){var r=p.barsSize;if(p.captionEl&&"auto"===r.bottom)if(a||(a=t.createEl("pswp__caption pswp__caption--fake"),a.appendChild(t.createEl("pswp__caption__center")),i.insertBefore(a,o),t.addClass(i,"pswp__ui--fit")),p.addCaptionHTMLFn(e,a,!0)){var s=a.clientHeight;n.bottom=parseInt(s,10)||44}else n.bottom=r.top;else n.bottom="auto"===r.bottom?0:r.bottom;n.top=r.top}else n.top=n.bottom=0},q=function(){p.timeToIdle&&u("mouseUsed",function(){t.bind(document,"mousemove",P),t.bind(document,"mouseout",B),C=setInterval(function(){L++,2===L&&O.setIdle(!0)},p.timeToIdle/2)})},V=function(){u("onVerticalDrag",function(e){v&&e<.95?O.hideControls():!v&&e>=.95&&O.showControls()});var e;u("onPinchClose",function(t){v&&t<.9?(O.hideControls(),e=!0):e&&!v&&t>.9&&O.showControls()}),u("zoomGestureEnded",function(){e=!1,e&&!v&&O.showControls()})},z=[{name:"caption",option:"captionEl",onInit:function(e){o=e}},{name:"share-modal",option:"shareEl",onInit:function(e){l=e},onTap:function(){S()}},{name:"button--share",option:"shareEl",onInit:function(e){s=e},onTap:function(){S()}},{name:"button--zoom",option:"zoomEl",onTap:e.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){r=e}},{name:"button--close",option:"closeEl",onTap:e.close},{name:"button--arrow--left",option:"arrowEl",onTap:e.prev},{name:"button--arrow--right",option:"arrowEl",onTap:e.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){n.isFullscreen()?n.exit():n.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(e){h=e}}],U=function(){var e,n,o,a=function(i){if(i)for(var a=i.length,r=0;r<a;r++){e=i[r],n=e.className;for(var s=0;s<z.length;s++)o=z[s],n.indexOf("pswp__"+o.name)>-1&&(p[o.option]?(t.removeClass(e,"pswp__element--disabled"),o.onInit&&o.onInit(e)):t.addClass(e,"pswp__element--disabled"))}};a(i.children);var r=t.getChildByClass(i,"pswp__top-bar");r&&a(r.children)};O.init=function(){t.extend(e.options,R,!0),p=e.options,i=t.getChildByClass(e.scrollWrap,"pswp__ui"),u=e.listen,V(),u("beforeChange",O.update),u("doubleTap",function(t){var n=e.currItem.initialZoomLevel;e.getZoomLevel()!==n?e.zoomTo(n,t,333):e.zoomTo(p.getDoubleTapZoom(!1,e.currItem),t,333)}),u("preventDragEvent",function(e,t,n){var i=e.target||e.srcElement;i&&i.getAttribute("class")&&e.type.indexOf("mouse")>-1&&(i.getAttribute("class").indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(i.tagName))&&(n.prevent=!1)}),u("bindEvents",function(){t.bind(i,"pswpTap click",y),t.bind(e.scrollWrap,"pswpTap",O.onGlobalTap),e.likelyTouchDevice||t.bind(e.scrollWrap,"mouseover",O.onMouseOver)}),u("unbindEvents",function(){b||S(),C&&clearInterval(C),t.unbind(document,"mouseout",B),t.unbind(document,"mousemove",P),t.unbind(i,"pswpTap click",y),t.unbind(e.scrollWrap,"pswpTap",O.onGlobalTap),t.unbind(e.scrollWrap,"mouseover",O.onMouseOver),n&&(t.unbind(document,n.eventK,O.updateFullscreen),n.isFullscreen()&&(p.hideAnimationDuration=0,n.exit()),n=null)}),u("destroy",function(){p.captionEl&&(a&&i.removeChild(a),t.removeClass(o,"pswp__caption--empty")),l&&(l.children[0].onclick=null),t.removeClass(i,"pswp__ui--over-close"),t.addClass(i,"pswp__ui--hidden"),O.setIdle(!1)}),p.showAnimationDuration||t.removeClass(i,"pswp__ui--hidden"),u("initialZoomIn",function(){p.showAnimationDuration&&t.removeClass(i,"pswp__ui--hidden")}),u("initialZoomOut",function(){t.addClass(i,"pswp__ui--hidden")}),u("parseVerticalMargin",H),U(),p.shareEl&&s&&l&&(b=!0),k(),q(),F(),M()},O.setIdle=function(e){d=e,_(i,"ui--idle",e)},O.update=function(){v&&e.currItem?(O.updateIndexIndicator(),p.captionEl&&(p.addCaptionHTMLFn(e.currItem,o),_(o,"caption--empty",!e.currItem.title)),D=!0):D=!1,b||S(),k()},O.updateFullscreen=function(i){i&&setTimeout(function(){e.setScrollOffset(0,t.getScrollY())},50),t[(n.isFullscreen()?"add":"remove")+"Class"](e.template,"pswp--fs")},O.updateIndexIndicator=function(){p.counterEl&&(r.innerHTML=e.getCurrentIndex()+1+p.indexIndicatorSep+p.getNumItemsFn())},O.onGlobalTap=function(n){n=n||window.event;var i=n.target||n.srcElement;if(!E)if(n.detail&&"mouse"===n.detail.pointerType){if(A(i))return void e.close();t.hasClass(i,"pswp__img")&&(1===e.getZoomLevel()&&e.getZoomLevel()<=e.currItem.fitRatio?p.clickToCloseNonZoomable&&e.close():e.toggleDesktopZoom(n.detail.releasePoint))}else if(p.tapToToggleControls&&(v?O.hideControls():O.showControls()),p.tapToClose&&(t.hasClass(i,"pswp__img")||A(i)))return void e.close()},O.onMouseOver=function(e){e=e||window.event;var t=e.target||e.srcElement;_(i,"ui--over-close",A(t))},O.hideControls=function(){t.addClass(i,"pswp__ui--hidden"),v=!1},O.showControls=function(){v=!0,D||O.update(),t.removeClass(i,"pswp__ui--hidden")},O.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},O.getFullscreenAPI=function(){var t,n=document.documentElement,i="fullscreenchange";return n.requestFullscreen?t={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:i}:n.mozRequestFullScreen?t={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+i}:n.webkitRequestFullscreen?t={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+i}:n.msRequestFullscreen&&(t={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),t&&(t.enter=function(){return c=p.closeOnScroll,p.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK?e.template[this.enterK]():void e.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},t.exit=function(){return p.closeOnScroll=c,document[this.exitK]()},t.isFullscreen=function(){return document[this.elementK]}),t}};return e});